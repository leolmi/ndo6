<div class="background"></div>

<header class="hero-unit">
  <i class="fa fa-map-marker fa-jump"></i>
  <div class="login-title">
    <p ng-show="loading">Accesso in corso...</p>
    <p ng-hide="loading">{{signin ? 'Registrati' : 'Accedi'}} a {{product.name}}</p>
    <p ng-hide="loading">per condividere messaggi e posizioni</p>
  </div>
</header>

<div class="login-content">
  <div class="working-container" ng-show="loading">
    <div class="working"></div>
  </div>
  <div class="login-form" ng-class="{'login-access':!loginform}" ng-hide="loading">
    <form class="form" name="formlgn" ng-submit="login(formlgn)" novalidate>
      <div class="row">
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.email.$invalid && submitted }">
          <label>Email</label>
          <input id="default-control" type="email" name="email" class="form-control" ng-model="user.email" required>
        </div>
        <div class="form-group form-group-sm" ng-show="signin" ng-class="{'has-error': formlgn.nick.$invalid && submitted && signin }">
          <label>Nick</label>
          <input type="text" name="nick" class="form-control" ng-model="user.name" ng-required="signin" mongoose-error/>
        </div>
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.password.$invalid && submitted }">
          <label>Password</label>
          <input type="password" name="password" class="form-control" ng-model="user.password" ng-minlength="3" required mongoose-error/>
        </div>
      </div>
      <div class="row" ng-show="signin">
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.confirmPassword.$invalid && submitted && signin }">
          <label>Ripeti Password</label>
          <input type="password" name="confirmPassword" class="form-control" ng-model="user.password2" ng-minlength="3" compare-to="user.password" compare-if="signin"/>
        </div>
      </div>
      <div class="form-group has-error">
        <p class="help-block" ng-show="formlgn.email.$error.required && formlgn.password.$error.required && submitted">Inserire una mail ed una password di almeno 3 caratteri.</p>
        <p class="help-block" ng-show="formlgn.email.$error.email && submitted">Inserire una mail valida.</p>
        <p class="help-block" ng-show="formlgn.nick.$error.required && submitted && signin">Definisci un nome con il quale ti presenterai nelle mappe</p>
        <p class="help-block" ng-show="(formlgn.password.$error.minlength || formlgn.password.$error.required) && submitted"> La password deve avere almeno 3 caratteri.</p>
        <p class="help-block" ng-show="formlgn.password.$error.mongoose">{{ errors.password }}</p>
        <p class="help-block error" ng-show="formlgn.confirmPassword.$error.compareTo && submitted && signin"> Ripeti la password correttamente.</p>
        <p class="help-block">{{ errors.other }}</p>
      </div>
      <div class="buttons-container">
        <div class="btn-default aslink" ng-click="toggle()">{{signin ? 'Accesso' : 'Registrazione'}}</div>
        <div class="btn-primary aslink on-right" ng-click="go(formlgn)">Vai</div>
      </div>
    </form>
  </div>
</div>

<footer class="footer login-footer">
  <p>{{product.name}} v.{{product.version}} | <a href="https://github.com/leolmi/ndo6/issues?state=open"><i class="fa fa-github"></i> Issues</a></p>
</footer>
