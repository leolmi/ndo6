<div class="background"></div>

<header class="hero-unit">
  <i class="fa fa-map-marker fa-jump"></i>
  <div class="login-title">
    <p ng-show="loading">Logging in...</p>
    <p ng-hide="loading">{{signup ? 'Sign up for' : 'Log in'}} {{product.name}}</p>
    <p ng-hide="loading">to share positions and posts in real time</p>
  </div>
</header>

<div class="login-content">
  <div class="working-container" ng-show="loading">
    <div class="working"></div>
  </div>
  <div class="login-form" ng-class="{'login-access':!loginform}" ng-hide="loading">
    <form class="form" name="formlgn" ng-submit="login(formlgn)" novalidate>
      <div class="row">
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.email.$invalid && submitted }">
          <label>Email</label>
          <input id="default-control" type="email" name="email" class="form-control" ng-model="user.email" ng-class="{'ng-invalid':recoverError}" required mongoose-error>
        </div>
        <div class="form-group form-group-sm" ng-show="signup" ng-class="{'has-error': formlgn.nick.$invalid && submitted && signup }">
          <label>Nick</label>
          <input type="text" name="nick" class="form-control" ng-model="user.name" ng-required="signup" mongoose-error/>
        </div>
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.password.$invalid && submitted }">
          <label>Password</label>
          <input type="password" name="password" class="form-control" ng-model="user.password" ng-minlength="3" ng-required="!recovering" mongoose-error/>
        </div>
      </div>
      <div class="row" ng-show="signup">
        <div class="form-group form-group-sm" ng-class="{ 'has-error': formlgn.confirmPassword.$invalid && submitted && signup }">
          <label>Repeat Password</label>
          <input type="password" name="confirmPassword" class="form-control" ng-model="user.password2" ng-minlength="3" compare-to="user.password" ng-required="signup && !recovering" compare-if="signup && !recovering"/>
        </div>
      </div>
      <div class="form-group has-error">
        <p class="help-block" ng-show="formlgn.email.$error.mongoose && submitted && !recovering">Existing account, recover your password if you've forgotten.</p>
        <p class="help-block" ng-show="formlgn.email.$error.required && formlgn.password.$error.required && submitted && !recovering">Enter a valid email address and a password of at least 3 characters.</p>
        <p class="help-block" ng-show="formlgn.email.$error.email && submitted">Enter a valid email.</p>
        <p class="help-block" ng-show="formlgn.nick.$error.required && submitted && signup">Enter a nickname by which you present yourself in the maps.</p>
        <p class="help-block" ng-show="(formlgn.password.$error.minlength || formlgn.password.$error.required) && submitted && !recovering"> Password must be at least 3 characters.</p>
        <p class="help-block" ng-show="formlgn.password.$error.mongoose">{{ errors.password }}</p>
        <p class="help-block error" ng-show="formlgn.confirmPassword.$error.compareTo && submitted && signup"> Ripeat password correctly.</p>
        <p class="help-block">{{ errors.other }}</p>
      </div>
      <div class="buttons-container">
        <div class="btn-default aslink" ng-click="toggle()">{{signup ? 'Log in' : 'Sign up'}}</div>
        <div class="btn-danger aslink" ng-hide="signup" ng-click="recover(formlgn)">Recover</div>
        <div class="btn-primary aslink on-right" ng-click="go(formlgn)">Go</div>
      </div>
    </form>
  </div>
</div>

<footer class="footer login-footer">
  <p>{{product.name}} v.{{product.version}} | <a href="https://github.com/leolmi/ndo6/issues?state=open"><i class="fa fa-github"></i> Issues</a></p>
</footer>
